{"version":3,"sources":["../src/web-app.js"],"names":["basePath","navigate","on","init","initJsApp","ignoreUrl","_loadCallback","loadCallback","Error","redirect","url","location","href","load","startsWith","pathname","substr","length"],"mappings":"AAAA;AACA,SAASA,QAAT,QAAyB,SAAzB;AACA,SAASC,QAAT,EAAmBC,EAAnB,QAA6B,WAA7B;AACA,SAASC,QAAQC,SAAjB,EAA4BC,SAA5B,QAA6C,UAA7C;;AAEA,IAAIC,sBAAJ;;AAEA,OAAO,SAASH,IAAT,CAAcI,YAAd,EAA4B;AACjC,MAAID,aAAJ,EACE,MAAM,IAAIE,KAAJ,CAAU,cAAV,CAAN;;AAGFF,kBAAgBC,YALiB,EAOjCH,WAPiC,EASjCF,GAAG,UAAH,EAAeO,QAAf,CATiC;AAUlC;;AAED,OAAO,SAASA,QAAT,CAAkBC,GAAlB,EAAuB;AACvBA,KADuB,KAKxBL,UAAUK,GAAV,CALwB,GAM1BC,SAASC,IAAT,GAAgBF,GANU,GAQ1BG,KAAKH,GAAL,CAR0B;AAU7B;;AAED,OAAO,SAASG,IAAT,CAAcH,GAAd,EAAmB;AACpBA,MAAII,UAAJ,CAAe,GAAf,CADoB,KAEtBJ,MAAMC,SAASI,QAAT,GAAoBL,GAFJ,GAKpBA,IAAII,UAAJ,CAAed,QAAf,CALoB,KAMtBU,MAAMA,IAAIM,MAAJ,CAAWhB,SAASiB,MAApB,CANgB,GASxBhB,SAASS,GAAT,CATwB,EAUxBJ,oBAAkBI,GAAlB,CAVwB;AAWzB","file":"web-app.js","sourcesContent":["/* global location */\nimport { basePath } from './index';\nimport { navigate, on } from './history';\nimport { init as initJsApp, ignoreUrl } from './js-app';\n\nlet _loadCallback;\n\nexport function init(loadCallback) {\n  if (_loadCallback) {\n    throw new Error('already init');\n  }\n\n  _loadCallback = loadCallback;\n\n  initJsApp();\n\n  on('redirect', redirect);\n}\n\nexport function redirect(url) {\n  if (!url) {\n    return;\n  }\n\n  if (ignoreUrl(url)) {\n    location.href = url;\n  } else {\n    load(url);\n  }\n}\n\nexport function load(url) {\n  if (url.startsWith('?')) {\n    url = location.pathname + url;\n  }\n\n  if (url.startsWith(basePath)) {\n    url = url.substr(basePath.length);\n  }\n\n  navigate(url);\n  _loadCallback(`/${url}`);\n}\n"]}