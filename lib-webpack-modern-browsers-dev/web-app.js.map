{"version":3,"sources":["../src/web-app.js"],"names":["basePath","navigate","on","init","initJsApp","ignoreUrl","_loadCallback","loadCallback","Error","redirect","url","location","href","load","startsWith","pathname","substr","length"],"mappings":"AAAA;AACA,SAASA,QAAT,QAAyB,SAAzB;AACA,SAASC,QAAT,EAAmBC,EAAnB,QAA6B,WAA7B;AACA,SAASC,QAAQC,SAAjB,EAA4BC,SAA5B,QAA6C,UAA7C;;AAEA,IAAIC,sBAAJ;;AAEA,OAAO,SAASH,IAAT,CAAcI,YAAd,EAA4B;AACjC,MAAID,aAAJ,EAAmB;AACjB,UAAM,IAAIE,KAAJ,CAAU,cAAV,CAAN;AACD;;AAEDF,kBAAgBC,YAAhB;;AAEAH;;AAEAF,KAAG,UAAH,EAAeO,QAAf;AACD;;AAED,OAAO,SAASA,QAAT,CAAkBC,GAAlB,EAAuB;AAC5B,MAAI,CAACA,GAAL,EAAU;AACR;AACD;;AAED,MAAIL,UAAUK,GAAV,CAAJ,EAAoB;AAClBC,aAASC,IAAT,GAAgBF,GAAhB;AACD,GAFD,MAEO;AACLG,SAAKH,GAAL;AACD;AACF;;AAED,OAAO,SAASG,IAAT,CAAcH,GAAd,EAAmB;AACxB,MAAIA,IAAII,UAAJ,CAAe,GAAf,CAAJ,EAAyB;AACvBJ,UAAMC,SAASI,QAAT,GAAoBL,GAA1B;AACD;;AAED,MAAIA,IAAII,UAAJ,CAAed,QAAf,CAAJ,EAA8B;AAC5BU,UAAMA,IAAIM,MAAJ,CAAWhB,SAASiB,MAApB,CAAN;AACD;;AAEDhB,WAASS,GAAT;AACAJ,gBAAe,KAAGI,GAAI,GAAtB;AACD","file":"web-app.js","sourcesContent":["/* global location */\nimport { basePath } from './index';\nimport { navigate, on } from './history';\nimport { init as initJsApp, ignoreUrl } from './js-app';\n\nlet _loadCallback;\n\nexport function init(loadCallback) {\n  if (_loadCallback) {\n    throw new Error('already init');\n  }\n\n  _loadCallback = loadCallback;\n\n  initJsApp();\n\n  on('redirect', redirect);\n}\n\nexport function redirect(url) {\n  if (!url) {\n    return;\n  }\n\n  if (ignoreUrl(url)) {\n    location.href = url;\n  } else {\n    load(url);\n  }\n}\n\nexport function load(url) {\n  if (url.startsWith('?')) {\n    url = location.pathname + url;\n  }\n\n  if (url.startsWith(basePath)) {\n    url = url.substr(basePath.length);\n  }\n\n  navigate(url);\n  _loadCallback(`/${url}`);\n}\n"]}