{"version":3,"sources":["../src/web-app.js"],"names":[],"mappings":"AAAA;AACA,SAAS,QAAT,QAAyB,SAAzB;AACA,SAAS,QAAT,EAAmB,EAAnB,QAA6B,WAA7B;AACA,SAAS,QAAQ,SAAjB,EAA4B,SAA5B,QAA6C,UAA7C;;AAEA,IAAI,yBAAJ;;AAEA,OAAO,SAAS,IAAT,CAAc,YAAd,EAA4B;AAC/B,QAAI,aAAJ,EAAmB;AACf,cAAM,IAAI,KAAJ,CAAU,cAAV,CAAN;AACH;;AAED,oBAAgB,YAAhB;;AAEA;;AAEA,OAAG,UAAH,EAAe,QAAf;AACH;;AAED,OAAO,SAAS,QAAT,CAAkB,GAAlB,EAAuB;AAC1B,QAAI,CAAC,GAAL,EAAU;AACN;AACH;;AAED,QAAI,UAAU,GAAV,CAAJ,EAAoB;AAChB,iBAAS,IAAT,GAAgB,GAAhB;AACH,KAFD,MAEO;AACH,aAAK,GAAL;AACH;AACJ;;AAED,OAAO,SAAS,IAAT,CAAc,GAAd,EAAmB;AACtB,QAAI,IAAI,UAAJ,CAAe,GAAf,CAAJ,EAAyB;AACrB,cAAM,SAAS,QAAT,GAAoB,GAA1B;AACH;;AAED,QAAI,IAAI,UAAJ,CAAe,QAAf,CAAJ,EAA8B;AAC1B,cAAM,IAAI,MAAJ,CAAW,SAAS,MAApB,CAAN;AACH;;AAED,aAAS,GAAT;AACA,wBAAkB,GAAlB;AACH","file":"web-app.js","sourcesContent":["/* global location */\nimport { basePath } from './index';\nimport { navigate, on } from './history';\nimport { init as initJsApp, ignoreUrl } from './js-app';\n\nlet _loadCallback;\n\nexport function init(loadCallback) {\n    if (_loadCallback) {\n        throw new Error('already init');\n    }\n\n    _loadCallback = loadCallback;\n\n    initJsApp();\n\n    on('redirect', redirect);\n}\n\nexport function redirect(url) {\n    if (!url) {\n        return;\n    }\n\n    if (ignoreUrl(url)) {\n        location.href = url;\n    } else {\n        load(url);\n    }\n}\n\nexport function load(url) {\n    if (url.startsWith('?')) {\n        url = location.pathname + url;\n    }\n\n    if (url.startsWith(basePath)) {\n        url = url.substr(basePath.length);\n    }\n\n    navigate(url);\n    _loadCallback(`/${url}`);\n}\n"]}