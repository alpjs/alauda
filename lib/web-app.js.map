{"version":3,"sources":["../src/web-app.js"],"names":[],"mappings":";;;;;QAMgB,I,GAAA,I;QAoBA,I,GAAA,I;;AA1BhB;;AACA;;AACA;;AAEA,IAAI,sBAAJ;;;;;EAEO,SAAS,IAAT,CAAc,YAAd,EAA4B;AAC/B,QAAI,aAAJ,EAAmB;AACf,cAAM,IAAI,KAAJ,CAAU,cAAV,CAAN;AACH;;AAED,oBAAgB,YAAhB;;AAEA;;AAEA,mBAAG,MAAH,EAAW,UAAC,GAAD,EAAS;AAChB,YAAI,GAAJ,EAAS;AACL,gBAAI,uBAAW,GAAX,CAAJ,EAAqB;AACjB,uBAAO,QAAP,GAAkB,GAAlB;AACH,aAFD,MAEO;AACH,qBAAK,GAAL;AACH;AACJ;AACJ,KARD;AASH;;;;;EAEM,SAAS,IAAT,CAAc,GAAd,EAAmB;AACtB,QAAI,IAAI,UAAJ,CAAe,GAAf,CAAJ,EAAyB;AACrB,cAAM,OAAO,QAAP,CAAgB,QAAhB,GAA2B,GAAjC;AACH;;AAED,QAAI,IAAI,UAAJ,iBAAJ,EAA8B;AAC1B,cAAM,IAAI,MAAJ,CAAW,gBAAS,MAApB,CAAN;AACH;;AAED,2BAAS,GAAT;AACA,wBAAkB,GAAlB;AACH","file":"web-app.js","sourcesContent":["import { basePath } from './index';\nimport { navigate } from './history';\nimport { init as initJsApp, ignoreLink, on } from './js-app';\n\nlet _loadCallback;\n\nexport function init(loadCallback) {\n    if (_loadCallback) {\n        throw new Error('already init');\n    }\n\n    _loadCallback = loadCallback;\n\n    initJsApp();\n\n    on('load', (url) => {\n        if (url) {\n            if (ignoreLink(url)) {\n                window.location = url;\n            } else {\n                load(url);\n            }\n        }\n    });\n}\n\nexport function load(url) {\n    if (url.startsWith('?')) {\n        url = window.location.pathname + url;\n    }\n\n    if (url.startsWith(basePath)) {\n        url = url.substr(basePath.length);\n    }\n\n    navigate(url);\n    _loadCallback(`/${url}`);\n}\n"]}